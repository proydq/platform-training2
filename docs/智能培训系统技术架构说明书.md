# 智能培训系统技术架构说明书

## 项目概述

### 项目名称
智能培训系统 - 公司内部产品培训平台

### 项目目标
将现有静态HTML页面转换为完整的前后端分离的企业级培训管理系统，支持多角色用户管理、课程学习、在线考试等核心功能。

### 开发策略
采用"先解决有无，快速上线"的策略，优先实现核心功能，后续迭代优化。

## 技术架构

### 整体架构
```
┌─────────────────┐    HTTP请求    ┌─────────────────┐
│   前端应用       │ ───────────→  │   后端API服务    │
│   Vue 3 + EP   │               │  Spring Boot    │
└─────────────────┘               └─────────────────┘
                                          │
                                          ▼
                                  ┌─────────────────┐
                                  │   MySQL数据库    │
                                  │   持久化存储     │
                                  └─────────────────┘
```

### 前端技术栈
- **框架**: Vue 3.5.17
- **构建工具**: Vite 7.0.4
- **UI组件库**: Element Plus 2.4.4
- **状态管理**: Pinia 2.1.7
- **路由管理**: Vue Router 4.2.5
- **HTTP客户端**: Axios 1.6.0
- **图表库**: ECharts 5.4.3
- **工具库**: Lodash-es, DayJS

### 后端技术栈
- **框架**: Spring Boot 2.6.15
- **JDK版本**: JDK 8
- **数据访问**: Spring Data JPA
- **安全框架**: Spring Security
- **代码简化**: Lombok
- **数据库**: MySQL 8.0+
- **构建工具**: Maven
- **日志框架**: SLF4J + Logback

## 数据库设计

### 设计规范
- **主键策略**: UUID自动生成
- **命名规范**: 表名使用下划线风格 (t_user, t_course)
- **字符集**: utf8mb4
- **时间字段**: 使用时间戳 (timestamp)
- **软删除**: 不使用deleted字段，采用物理删除
- **建表策略**: JPA ddl-auto: update 自动建表

### 核心数据表
1. **t_user** - 用户表
2. **t_role** - 角色表
3. **t_user_role** - 用户角色关联表
4. **t_course** - 课程表
5. **t_course_chapter** - 课程章节表
6. **t_study_record** - 学习记录表
7. **t_exam** - 考试表
8. **t_exam_question** - 考试题目表
9. **t_exam_result** - 考试结果表
10. **t_notification** - 通知表
11. **t_system_config** - 系统配置表

## 安全设计

### 认证授权
- **认证方式**: JWT Token
- **Token有效期**: 1周 (后期可调整)
- **密码加密**: BCrypt算法
- **权限控制**: 基于角色的权限控制 (RBAC)

### 用户角色
- **ADMIN**: 系统管理员 - 全部权限
- **TEACHER**: 讲师 - 课程管理、学员管理权限  
- **STUDENT**: 学员 - 学习、考试权限

### 安全措施
- 所有API接口进行身份验证
- 敏感操作需要权限验证
- 前后端双重数据校验
- CORS跨域配置
- SQL注入防护 (JPA自动防护)

## 文件存储

### 存储策略
- **存储方式**: 本地文件系统 (简单粗暴)
- **存储路径**: /uploads/{category}/{userId}/
- **文件限制**: 最大200MB
- **类型限制**: 暂不限制文件类型
- **访问控制**: 通过Controller统一控制访问权限

### 文件分类
- **avatar**: 用户头像
- **course**: 课程资料 (视频、文档、图片)
- **exam**: 考试相关文件
- **temp**: 临时文件

## API设计

### 设计规范
- **风格**: RESTful API
- **路径前缀**: /api/v1/
- **返回格式**: 统一Result<T>包装
- **错误码**: 1000起步，按模块分段
- **分页**: 统一使用Pageable，默认20条/页

### 错误码规划
- **1000-1999**: 用户模块
- **2000-2999**: 课程模块  
- **3000-3999**: 考试模块
- **4000-4999**: 系统模块
- **9000-9999**: 通用错误

### 统一返回格式
```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": 1642665600000
}
```

## 项目结构

### 整体目录结构
```
smart-training-system/
├── backend/                    # Spring Boot后端
│   ├── src/main/java/com/training/
│   │   ├── controller/         # 控制层
│   │   ├── service/           # 业务逻辑层
│   │   ├── repository/        # 数据访问层
│   │   ├── entity/            # 实体类
│   │   ├── dto/              # 数据传输对象
│   │   ├── config/           # 配置类
│   │   ├── security/         # 安全配置
│   │   ├── utils/            # 工具类
│   │   └── exception/        # 异常处理
│   ├── src/main/resources/
│   │   └── application.yml   # 统一配置文件
│   └── pom.xml
├── frontend/                   # Vue 3前端
│   ├── src/
│   │   ├── components/       # 通用组件
│   │   ├── views/           # 页面组件
│   │   ├── router/          # 路由配置
│   │   ├── store/           # 状态管理
│   │   ├── api/            # API接口
│   │   ├── utils/          # 工具函数
│   │   └── styles/         # 样式文件
│   ├── public/
│   └── package.json
├── docs/                      # 项目文档
└── README.md
```

## 开发环境

### 版本信息
- **Maven版本**: 3.9.6 (最新稳定版)
- **JDK版本**: 1.8 (长期支持版本)
- **Spring Boot版本**: 2.6.15 (稳定LTS版本)

### 端口配置
- **后端服务**: 8080
- **前端开发**: 3000
- **数据库**: 3306

### 环境要求
- **JDK**: 1.8+
- **Node.js**: 16+
- **MySQL**: 8.0+
- **Maven**: 3.6+ (推荐3.9.6)

### 版本兼容性
- Maven 3.9.6 与 Spring Boot 2.6.15 完全兼容
- JDK 8 与所有选择的技术栈兼容
- 所有依赖版本经过验证，无冲突风险

### 配置信息
- **数据库名**: smart_training
- **默认管理员**: admin / admin123
- **CORS**: 允许跨域访问
- **SQL日志**: 根据需要开启
- **配置管理**: 统一使用application.yml，通过注释区分不同环境配置

## 部署方案

### 开发部署
- 前端: npm run build 构建静态文件
- 后端: mvn package 打包jar文件
- 数据库: 本地MySQL实例

### 生产部署
- 前端: 构建后放到前端目录 (非static)
- 后端: jar包部署
- 数据库: 生产环境MySQL
- 反向代理: Nginx (可选)

## 性能考虑

### 数据库优化
- 合理建立索引
- 分页查询避免全表扫描
- JPA懒加载配置

### 前端优化
- 路由懒加载
- 组件按需加载
- 图片资源优化

### 接口优化
- 统一异常处理
- 参数校验
- 日志记录

## 扩展性设计

### 后续优化点
- 缓存机制 (Redis)
- 消息队列 (RabbitMQ)
- 微服务拆分
- 容器化部署 (Docker)
- 监控告警
- 自动化测试

### 注意事项
- 当前版本专注核心功能实现
- 暂不考虑复杂的并发控制
- 文件存储后续可升级为云存储
- 数据库事务后续优化